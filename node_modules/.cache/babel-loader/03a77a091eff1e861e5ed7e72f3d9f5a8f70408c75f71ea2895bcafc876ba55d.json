{"ast":null,"code":"export function groupBy(key) {\n  return function group(array) {\n    return array.reduce((acc, obj) => {\n      const property = obj[key];\n      const {\n        date,\n        ...rest\n      } = obj;\n      acc[property] = acc[property] || [];\n      acc[property].push(rest);\n      return acc;\n    }, {});\n  };\n}\nexport function getAverage(array, isRound = true) {\n  let average = 0;\n  if (isRound) {\n    average = Math.round(array.reduce((a, b) => a + b, 0) / array.length);\n    if (average === 0) {\n      average = 0;\n    }\n  } else average = (array.reduce((a, b) => a + b, 0) / array.length).toFixed(2);\n  return average;\n}\nexport function getMostFrequentWeather(arr) {\n  const hashmap = arr.reduce((acc, val) => {\n    acc[val] = (acc[val] || 0) + 1;\n    return acc;\n  }, {});\n  return Object.keys(hashmap).reduce((a, b) => hashmap[a] > hashmap[b] ? a : b);\n}\nexport const descriptionToIconName = (desc, descriptions_list) => {\n  let iconName = descriptions_list.find(item => item.description === desc);\n  return iconName.icon || 'unknown';\n};\nexport const getWeekForecastWeather = (response, descriptions_list) => {\n  console.log(\"data\", response);\n  let foreacast_data = [];\n  let descriptions_data = [];\n  if (!response || Object.keys(response).length === 0 || response.cod === '404') return [];else response === null || response === void 0 ? void 0 : response.list.slice().map((item, idx) => {\n    descriptions_data.push({\n      description: item.weather[0].description,\n      date: item.dt_txt.substring(0, 10)\n    });\n    foreacast_data.push({\n      date: item.dt_txt.substring(0, 10),\n      temp: item.main.temp,\n      humidity: item.main.humidity,\n      wind: item.wind.speed,\n      clouds: item.clouds.all\n    });\n    return {\n      idx,\n      item\n    };\n  });\n  const groupByDate = groupBy('date');\n  let grouped_forecast_data = groupByDate(foreacast_data);\n  let grouped_forecast_descriptions = groupByDate(descriptions_data);\n  const description_keys = Object.keys(grouped_forecast_descriptions);\n  let dayDescList = [];\n  description_keys.forEach(key => {\n    let singleDayDescriptions = grouped_forecast_descriptions[key].map(item => item.description);\n    let mostFrequentDescription = getMostFrequentWeather(singleDayDescriptions);\n    dayDescList.push(mostFrequentDescription);\n  });\n  const forecast_keys = Object.keys(grouped_forecast_data);\n  let dayAvgsList = [];\n  forecast_keys.forEach((key, idx) => {\n    let dayTempsList = [];\n    let dayHumidityList = [];\n    let dayWindList = [];\n    let dayCloudsList = [];\n    for (let i = 0; i < grouped_forecast_data[key].length; i++) {\n      dayTempsList.push(grouped_forecast_data[key][i].temp);\n      dayHumidityList.push(grouped_forecast_data[key][i].humidity);\n      dayWindList.push(grouped_forecast_data[key][i].wind);\n      dayCloudsList.push(grouped_forecast_data[key][i].clouds);\n    }\n    dayAvgsList.push({\n      date: key,\n      temp: getAverage(dayTempsList),\n      humidity: getAverage(dayHumidityList),\n      wind: getAverage(dayWindList, false),\n      clouds: getAverage(dayCloudsList),\n      description: dayDescList[idx],\n      icon: descriptionToIconName(dayDescList[idx], descriptions_list)\n    });\n  });\n  return dayAvgsList;\n};\nexport const getTodayForecastWeather = (response, current_date, current_datetime) => {\n  let all_today_forecasts = [];\n  if (!response || Object.keys(response).length === 0 || response.cod === '404') return [];else response === null || response === void 0 ? void 0 : response.list.slice().map(item => {\n    if (item.dt_txt.startsWith(current_date.substring(0, 10))) {\n      if (item.dt > current_datetime) {\n        all_today_forecasts.push({\n          time: item.dt_txt.split(' ')[1].substring(0, 5),\n          icon: item.weather[0].icon,\n          temperature: Math.round(item.main.temp) + ' °C'\n        });\n      }\n    }\n    return all_today_forecasts;\n  });\n  if (all_today_forecasts.length < 7) {\n    return [...all_today_forecasts];\n  } else {\n    return all_today_forecasts.slice(-6);\n  }\n};","map":{"version":3,"names":["groupBy","key","group","array","reduce","acc","obj","property","date","rest","push","getAverage","isRound","average","Math","round","a","b","length","toFixed","getMostFrequentWeather","arr","hashmap","val","Object","keys","descriptionToIconName","desc","descriptions_list","iconName","find","item","description","icon","getWeekForecastWeather","response","console","log","foreacast_data","descriptions_data","cod","list","slice","map","idx","weather","dt_txt","substring","temp","main","humidity","wind","speed","clouds","all","groupByDate","grouped_forecast_data","grouped_forecast_descriptions","description_keys","dayDescList","forEach","singleDayDescriptions","mostFrequentDescription","forecast_keys","dayAvgsList","dayTempsList","dayHumidityList","dayWindList","dayCloudsList","i","getTodayForecastWeather","current_date","current_datetime","all_today_forecasts","startsWith","dt","time","split","temperature"],"sources":["C:/Users/rohit/OneDrive/Desktop/react project/the-weather-forecasting/src/utilities/DataUtils.js"],"sourcesContent":["export function groupBy(key) {\r\n  return function group(array) {\r\n    return array.reduce((acc, obj) => {\r\n      const property = obj[key];\r\n      const { date, ...rest } = obj;\r\n      acc[property] = acc[property] || [];\r\n      acc[property].push(rest);\r\n      return acc;\r\n    }, {});\r\n  };\r\n}\r\n\r\nexport function getAverage(array, isRound = true) {\r\n  let average = 0;\r\n  if (isRound) {\r\n    average = Math.round(array.reduce((a, b) => a + b, 0) / array.length);\r\n    if (average === 0) {\r\n      average = 0;\r\n    }\r\n  } else average = (array.reduce((a, b) => a + b, 0) / array.length).toFixed(2);\r\n\r\n  return average;\r\n}\r\n\r\nexport function getMostFrequentWeather(arr) {\r\n  const hashmap = arr.reduce((acc, val) => {\r\n    acc[val] = (acc[val] || 0) + 1;\r\n    return acc;\r\n  }, {});\r\n  return Object.keys(hashmap).reduce((a, b) =>\r\n    hashmap[a] > hashmap[b] ? a : b\r\n  );\r\n}\r\n\r\nexport const descriptionToIconName = (desc, descriptions_list) => {\r\n  let iconName = descriptions_list.find((item) => item.description === desc);\r\n  return iconName.icon || 'unknown';\r\n};\r\n\r\nexport const getWeekForecastWeather = (response, descriptions_list) => {\r\n  console.log(\"data\", response)\r\n  let foreacast_data = [];\r\n  let descriptions_data = [];\r\n\r\n  if (!response || Object.keys(response).length === 0 || response.cod === '404')\r\n    return [];\r\n  else\r\n    response?.list.slice().map((item, idx) => {\r\n      descriptions_data.push({\r\n        description: item.weather[0].description,\r\n        date: item.dt_txt.substring(0, 10),\r\n      });\r\n      foreacast_data.push({\r\n        date: item.dt_txt.substring(0, 10),\r\n        temp: item.main.temp,\r\n        humidity: item.main.humidity,\r\n        wind: item.wind.speed,\r\n        clouds: item.clouds.all,\r\n      });\r\n\r\n      return { idx, item };\r\n    });\r\n\r\n  const groupByDate = groupBy('date');\r\n  let grouped_forecast_data = groupByDate(foreacast_data);\r\n  let grouped_forecast_descriptions = groupByDate(descriptions_data);\r\n\r\n  const description_keys = Object.keys(grouped_forecast_descriptions);\r\n\r\n  let dayDescList = [];\r\n\r\n  description_keys.forEach((key) => {\r\n    let singleDayDescriptions = grouped_forecast_descriptions[key].map(\r\n      (item) => item.description\r\n    );\r\n    let mostFrequentDescription = getMostFrequentWeather(singleDayDescriptions);\r\n    dayDescList.push(mostFrequentDescription);\r\n  });\r\n\r\n  const forecast_keys = Object.keys(grouped_forecast_data);\r\n  let dayAvgsList = [];\r\n\r\n  forecast_keys.forEach((key, idx) => {\r\n    let dayTempsList = [];\r\n    let dayHumidityList = [];\r\n    let dayWindList = [];\r\n    let dayCloudsList = [];\r\n\r\n    for (let i = 0; i < grouped_forecast_data[key].length; i++) {\r\n      dayTempsList.push(grouped_forecast_data[key][i].temp);\r\n      dayHumidityList.push(grouped_forecast_data[key][i].humidity);\r\n      dayWindList.push(grouped_forecast_data[key][i].wind);\r\n      dayCloudsList.push(grouped_forecast_data[key][i].clouds);\r\n    }\r\n\r\n    dayAvgsList.push({\r\n      date: key,\r\n      temp: getAverage(dayTempsList),\r\n      humidity: getAverage(dayHumidityList),\r\n      wind: getAverage(dayWindList, false),\r\n      clouds: getAverage(dayCloudsList),\r\n      description: dayDescList[idx],\r\n      icon: descriptionToIconName(dayDescList[idx], descriptions_list),\r\n    });\r\n  });\r\n\r\n  return dayAvgsList;\r\n};\r\n\r\nexport const getTodayForecastWeather = (\r\n  response,\r\n  current_date,\r\n  current_datetime\r\n) => {\r\n  let all_today_forecasts = [];\r\n\r\n  if (!response || Object.keys(response).length === 0 || response.cod === '404')\r\n    return [];\r\n  else\r\n    response?.list.slice().map((item) => {\r\n      if (item.dt_txt.startsWith(current_date.substring(0, 10))) {\r\n        if (item.dt > current_datetime) {\r\n          all_today_forecasts.push({\r\n            time: item.dt_txt.split(' ')[1].substring(0, 5),\r\n            icon: item.weather[0].icon,\r\n            temperature: Math.round(item.main.temp) + ' °C',\r\n          });\r\n        }\r\n      }\r\n      return all_today_forecasts;\r\n    });\r\n\r\n  if (all_today_forecasts.length < 7) {\r\n    return [...all_today_forecasts];\r\n  } else {\r\n    return all_today_forecasts.slice(-6);\r\n  }\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}